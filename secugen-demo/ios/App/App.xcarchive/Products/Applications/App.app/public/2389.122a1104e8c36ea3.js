"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2389],{1307:(z,F,m)=>{m.d(F,{S:()=>M});var c=m(2200),R=m(4341),l=m(7343),U=m(2615),k=m(3664);let M=(()=>{var L;class w{static#e=L=()=>(this.\u0275fac=function(e){return new(e||w)},this.\u0275mod=k.$C({type:w}),this.\u0275inj=U.G2t({imports:[c.MD,R.YN,l.bv]}))}return L(),w})()},5083:(z,F,m)=>{m.d(F,{E_:()=>D,F3:()=>w});var c=m(467),R=function(s){return s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE",s}(R||{});class l extends Error{constructor(r,n,d){super(r),this.message=r,this.code=n,this.data=d}}const k=s=>{const r=s.CapacitorCustomPlatform||null,n=s.Capacitor||{},d=n.Plugins=n.Plugins||{},a=()=>null!==r?r.name:(s=>{var r,n;return s?.androidBridge?"android":null!==(n=null===(r=s?.webkit)||void 0===r?void 0:r.messageHandlers)&&void 0!==n&&n.bridge?"ios":"web"})(s),v=g=>{var p;return null===(p=n.PluginHeaders)||void 0===p?void 0:p.find(j=>j.name===g)},b=new Map;return n.convertFileSrc||(n.convertFileSrc=g=>g),n.getPlatform=a,n.handleError=g=>s.console.error(g),n.isNativePlatform=()=>"web"!==a(),n.isPluginAvailable=g=>{const p=b.get(g);return!(!p?.platforms.has(a())&&!v(g))},n.registerPlugin=(g,p={})=>{const j=b.get(g);if(j)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),j.proxy;const x=a(),T=v(g);let C;const X=function(){var E=(0,c.A)(function*(){return!C&&x in p?C=C="function"==typeof p[x]?yield p[x]():p[x]:null!==r&&!C&&"web"in p&&(C=C="function"==typeof p.web?yield p.web():p.web),C});return function(){return E.apply(this,arguments)}}(),W=E=>{let _;const P=(...S)=>{const O=X().then(A=>{const I=((E,_)=>{var P,S;if(!T){if(E)return null===(S=E[_])||void 0===S?void 0:S.bind(E);throw new l(`"${g}" plugin is not implemented on ${x}`,R.Unimplemented)}{const O=T?.methods.find(A=>_===A.name);if(O)return"promise"===O.rtype?A=>n.nativePromise(g,_.toString(),A):(A,I)=>n.nativeCallback(g,_.toString(),A,I);if(E)return null===(P=E[_])||void 0===P?void 0:P.bind(E)}})(A,E);if(I){const B=I(...S);return _=B?.remove,B}throw new l(`"${g}.${E}()" is not implemented on ${x}`,R.Unimplemented)});return"addListener"===E&&(O.remove=(0,c.A)(function*(){return _()})),O};return P.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:E,writable:!1,configurable:!1}),P},G=W("addListener"),H=W("removeListener"),q=(E,_)=>{const P=G({eventName:E},_),S=function(){var A=(0,c.A)(function*(){const I=yield P;H({eventName:E,callbackId:I},_)});return function(){return A.apply(this,arguments)}}(),O=new Promise(A=>P.then(()=>A({remove:S})));return O.remove=(0,c.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield S()}),O},N=new Proxy({},{get(E,_){switch(_){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?q:G;case"removeListener":return H;default:return W(_)}}});return d[g]=N,b.set(g,{name:g,proxy:N,platforms:new Set([...Object.keys(p),...T?[x]:[]])}),N},n.Exception=l,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},L=(s=>s.Capacitor=k(s))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),w=L.registerPlugin;class D{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,n){var d=this;let a=!1;this.listeners[r]||(this.listeners[r]=[],a=!0),this.listeners[r].push(n);const f=this.windowListeners[r];f&&!f.registered&&this.addWindowListener(f),a&&this.sendRetainedArgumentsForEvent(r);const v=function(){var b=(0,c.A)(function*(){return d.removeListener(r,n)});return function(){return b.apply(this,arguments)}}();return Promise.resolve({remove:v})}removeAllListeners(){var r=this;return(0,c.A)(function*(){r.listeners={};for(const n in r.windowListeners)r.removeWindowListener(r.windowListeners[n]);r.windowListeners={}})()}notifyListeners(r,n,d){const a=this.listeners[r];if(a)a.forEach(i=>i(n));else if(d){let i=this.retainedEventArguments[r];i||(i=[]),i.push(n),this.retainedEventArguments[r]=i}}hasListeners(r){var n;return!(null===(n=this.listeners[r])||void 0===n||!n.length)}registerWindowListener(r,n){this.windowListeners[n]={registered:!1,windowEventName:r,pluginEventName:n,handler:d=>{this.notifyListeners(n,d)}}}unimplemented(r="not implemented"){return new L.Exception(r,R.Unimplemented)}unavailable(r="not available"){return new L.Exception(r,R.Unavailable)}removeListener(r,n){var d=this;return(0,c.A)(function*(){const a=d.listeners[r];if(!a)return;const i=a.indexOf(n);d.listeners[r].splice(i,1),d.listeners[r].length||d.removeWindowListener(d.windowListeners[r])})()}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){const n=this.retainedEventArguments[r];n&&(delete this.retainedEventArguments[r],n.forEach(d=>{this.notifyListeners(r,d)}))}}const e=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),t=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class o extends D{getCookies(){return(0,c.A)(function*(){const r=document.cookie,n={};return r.split(";").forEach(d=>{if(d.length<=0)return;let[a,i]=d.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=t(a).trim(),i=t(i).trim(),n[a]=i}),n})()}setCookie(r){return(0,c.A)(function*(){try{const n=e(r.key),d=e(r.value),a=`; expires=${(r.expires||"").replace("expires=","")}`,i=(r.path||"/").replace("path=",""),f=null!=r.url&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${n}=${d||""}${a}; path=${i}; ${f};`}catch(n){return Promise.reject(n)}})()}deleteCookie(r){return(0,c.A)(function*(){try{document.cookie=`${r.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})()}clearCookies(){return(0,c.A)(function*(){try{const r=document.cookie.split(";")||[];for(const n of r)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(r){return Promise.reject(r)}})()}clearAllCookies(){var r=this;return(0,c.A)(function*(){try{yield r.clearCookies()}catch(n){return Promise.reject(n)}})()}}w("CapacitorCookies",{web:()=>new o});const h=function(){var s=(0,c.A)(function*(r){return new Promise((n,d)=>{const a=new FileReader;a.onload=()=>{const i=a.result;n(i.indexOf(",")>=0?i.split(",")[1]:i)},a.onerror=i=>d(i),a.readAsDataURL(r)})});return function(n){return s.apply(this,arguments)}}();class Q extends D{request(r){return(0,c.A)(function*(){const n=((s,r={})=>{const n=Object.assign({method:s.method||"GET",headers:s.headers},r),a=((s={})=>{const r=Object.keys(s);return Object.keys(s).map(a=>a.toLocaleLowerCase()).reduce((a,i,f)=>(a[i]=s[r[f]],a),{})})(s.headers)["content-type"]||"";if("string"==typeof s.data)n.body=s.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[f,v]of Object.entries(s.data||{}))i.set(f,v);n.body=i.toString()}else if(a.includes("multipart/form-data")||s.data instanceof FormData){const i=new FormData;if(s.data instanceof FormData)s.data.forEach((v,y)=>{i.append(y,v)});else for(const v of Object.keys(s.data))i.append(v,s.data[v]);n.body=i;const f=new Headers(n.headers);f.delete("content-type"),n.headers=f}else(a.includes("application/json")||"object"==typeof s.data)&&(n.body=JSON.stringify(s.data));return n})(r,r.webFetchExtra),d=((s,r=!0)=>s?Object.entries(s).reduce((d,a)=>{const[i,f]=a;let v,y;return Array.isArray(f)?(y="",f.forEach(b=>{v=r?encodeURIComponent(b):b,y+=`${i}=${v}&`}),y.slice(0,-1)):(v=r?encodeURIComponent(f):f,y=`${i}=${v}`),`${d}&${y}`},"").substr(1):null)(r.params,r.shouldEncodeUrlParams),a=d?`${r.url}?${d}`:r.url,i=yield fetch(a,n),f=i.headers.get("content-type")||"";let y,b,{responseType:v="text"}=i.ok?r:{};switch(f.includes("application/json")&&(v="json"),v){case"arraybuffer":case"blob":b=yield i.blob(),y=yield h(b);break;case"json":y=yield i.json();break;default:y=yield i.text()}const $={};return i.headers.forEach((g,p)=>{$[p]=g}),{data:y,headers:$,status:i.status,url:i.url}})()}get(r){var n=this;return(0,c.A)(function*(){return n.request(Object.assign(Object.assign({},r),{method:"GET"}))})()}post(r){var n=this;return(0,c.A)(function*(){return n.request(Object.assign(Object.assign({},r),{method:"POST"}))})()}put(r){var n=this;return(0,c.A)(function*(){return n.request(Object.assign(Object.assign({},r),{method:"PUT"}))})()}patch(r){var n=this;return(0,c.A)(function*(){return n.request(Object.assign(Object.assign({},r),{method:"PATCH"}))})()}delete(r){var n=this;return(0,c.A)(function*(){return n.request(Object.assign(Object.assign({},r),{method:"DELETE"}))})()}}w("CapacitorHttp",{web:()=>new Q})},7479:(z,F,m)=>{m.d(F,{Q:()=>L});var c=m(467);const l=(0,m(5083).F3)("SecuGenBLE",{web:()=>m.e(2819).then(m.bind(m,2819)).then(w=>new w.SecuGenBLEWeb)});var U=m(1413),k=m(2615);let L=(()=>{var w;class D{constructor(){this.isInitialized=!1,this.connectedDevice=null,this.discoveredDevices=[],this.lastCaptureResult=null,this.captureProgressSubject=new U.B,this.captureCompleteSubject=new U.B,this.captureProgress$=this.captureProgressSubject.asObservable(),this.captureComplete$=this.captureCompleteSubject.asObservable(),this.setupEventListeners()}setupEventListeners(){l.addListener("deviceFound",e=>{console.log("\u{1f50d} Device found:",e);const t=this.discoveredDevices.findIndex(o=>o.id===e.id);t>=0?this.discoveredDevices[t]=e:this.discoveredDevices.push(e)}),l.addListener("connectionStateChange",e=>{console.log("\u{1f517} Connection state changed:",e),this.connectedDevice=e.connected&&e.device?e.device:null}),l.addListener("scanStopped",()=>{console.log("\u{1f6d1} Scan stopped")}),l.addListener("captureProgress",e=>{console.log("\u{1f4ca} Capture progress:",e),this.captureProgressSubject.next(e)}),l.addListener("captureComplete",e=>{console.log("\u2705 Capture complete:",e),this.lastCaptureResult=e,this.captureCompleteSubject.next(e)}),l.addListener("dataReceived",e=>{console.log("\u{1f4e1} Data received:",e)})}initialize(){var e=this;return(0,c.A)(function*(){try{const t=yield l.initialize();return t.success&&(e.isInitialized=!0),t}catch(t){return console.error("Initialize error:",t),{success:!1,message:t instanceof Error?t.message:String(t)}}})()}isBluetoothEnabled(){return(0,c.A)(function*(){try{return(yield l.isBluetoothEnabled()).enabled}catch(e){return console.error("Bluetooth check error:",e),!1}})()}scan(){var e=this;return(0,c.A)(function*(t=1e4){try{if(!e.isInitialized)throw new Error("Plugin ch\u01b0a \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o");return e.discoveredDevices=[],yield l.scan({timeoutMs:t}),yield new Promise(u=>setTimeout(u,1e3)),{devices:e.discoveredDevices}}catch(o){return console.error("Scan error:",o),{devices:[]}}}).apply(this,arguments)}getDiscoveredDevices(){return this.discoveredDevices}getLastCaptureResult(){return this.lastCaptureResult}savePreferredDevice(e){try{const t=this.getPreferredDevices(),o=t.findIndex(u=>u.id===e.id||u.address===e.address);o>=0?(t[o]=e,console.log("\u{1f4dd} Updated preferred device:",e.name)):(t.push(e),console.log("\u{1f4be} Added new preferred device:",e.name)),localStorage.setItem("secugen_preferred_devices",JSON.stringify(t)),console.log(`\u{1f4f1} Total preferred devices: ${t.length}`)}catch(t){console.error("Error saving preferred device:",t)}}getPreferredDevice(){const e=this.getPreferredDevices();return e.length>0?e[0]:null}getPreferredDevices(){try{const e=localStorage.getItem("secugen_preferred_devices");if(e){const t=JSON.parse(e);return console.log(`\u{1f4f1} Loaded ${t.length} preferred devices`),t}}catch(e){console.error("Error loading preferred devices:",e)}return[]}removePreferredDevice(e){try{const o=this.getPreferredDevices().filter(u=>u.id!==e&&u.address!==e);localStorage.setItem("secugen_preferred_devices",JSON.stringify(o)),console.log(`\u{1f5d1}\ufe0f Removed preferred device: ${e}`),console.log(`\u{1f4f1} Remaining preferred devices: ${o.length}`)}catch(t){console.error("Error removing preferred device:",t)}}clearPreferredDevice(){try{localStorage.removeItem("secugen_preferred_devices"),console.log("\u{1f5d1}\ufe0f Cleared all preferred devices")}catch(e){console.error("Error clearing preferred devices:",e)}}autoConnectPreferredDevice(){var e=this;return(0,c.A)(function*(){const t=e.getPreferredDevice();if(!t)return console.log("\u{1f50d} No preferred device saved"),!1;const o=e.discoveredDevices.find(u=>u.id===t.id||u.address===t.address);if(o){console.log("\u{1f3af} Found preferred device, auto-connecting...");try{if((yield e.connect(o.id)).connected)return console.log("\u2705 Auto-connected to preferred device"),!0}catch(u){console.error("\u274c Auto-connect failed:",u)}}else console.log("\u{1f50d} Preferred device not found in scan results");return!1})()}stopScan(){return(0,c.A)(function*(){try{return yield l.stopScan()}catch(e){return console.error("Stop scan error:",e),{success:!1,message:e instanceof Error?e.message:String(e)}}})()}connect(e){var t=this;return(0,c.A)(function*(){try{if(!t.isInitialized)throw new Error("Plugin not initialized");const o=yield l.connect({deviceId:e});return o.connected&&o.deviceInfo&&(t.connectedDevice=o.deviceInfo),o}catch(o){return console.error("Connect error:",o),{connected:!1}}})()}disconnect(){var e=this;return(0,c.A)(function*(){try{const t=yield l.disconnect();return t.success&&(e.connectedDevice=null),t}catch(t){return console.error("Disconnect error:",t),{success:!1,message:t instanceof Error?t.message:String(t)}}})()}isConnected(){return(0,c.A)(function*(){try{return(yield l.isConnected()).connected}catch(e){return console.error("Connection check error:",e),!1}})()}getVersion(){var e=this;return(0,c.A)(function*(){try{if(!e.connectedDevice)throw new Error("No device connected");const t=yield l.getVersion();return{success:t.success,message:t.message||"Version retrieved"}}catch(t){return console.error("Get version error:",t),{success:!1,message:t instanceof Error?t.message:String(t)}}})()}capture(){var e=this;return(0,c.A)(function*(t=!0,o=!0,u=15e3){try{if(!e.connectedDevice)throw new Error("No device connected");return yield l.capture({fullSize:t,wsqFormat:o,timeoutMs:u})}catch(h){return console.error("Capture error:",h),{success:!1,message:h instanceof Error?h.message:String(h)}}}).apply(this,arguments)}captureWithSizeOption(){var e=this;return(0,c.A)(function*(t="full",o=!0,u=15e3){try{if(!e.connectedDevice)throw new Error("No device connected");const h="full"===t;return console.log(`\u{1f4cf} Capture with size option: ${t} (fullSize: ${h})`),yield l.capture({fullSize:h,wsqFormat:o,timeoutMs:u,sizeOption:t})}catch(h){return console.error("Capture error:",h),{success:!1,message:h instanceof Error?h.message:String(h)}}}).apply(this,arguments)}register(e){var t=this;return(0,c.A)(function*(o,u=!1){try{if(!t.connectedDevice)throw new Error("No device connected");if(o<1||o>999)throw new Error("User ID must be between 1-999");return yield l.register({userID:o,isAdmin:u})}catch(h){return console.error("Register error:",h),{success:!1,message:h instanceof Error?h.message:String(h)}}}).apply(this,arguments)}completeRegistration(){var e=this;return(0,c.A)(function*(){try{if(!e.connectedDevice)throw new Error("No device connected");return yield l.completeRegistration()}catch(t){return console.error("Complete registration error:",t),{success:!1,message:t instanceof Error?t.message:String(t)}}})()}verify(e){var t=this;return(0,c.A)(function*(){try{if(!t.connectedDevice)throw new Error("No device connected");if(e<1||e>999)throw new Error("User ID must be between 1-999");return yield l.verify({userID:e})}catch(o){return console.error("Verify error:",o),{success:!1,message:o instanceof Error?o.message:String(o)}}})()}identify(){var e=this;return(0,c.A)(function*(){try{if(!e.connectedDevice)throw new Error("No device connected");return yield l.identify()}catch(t){return console.error("Identify error:",t),{success:!1,message:t instanceof Error?t.message:String(t)}}})()}deleteFingerprint(e){var t=this;return(0,c.A)(function*(){try{if(!t.connectedDevice)throw new Error("No device connected");if(e<1||e>999)throw new Error("User ID must be between 1-999");return yield l.deleteFingerprint({userID:e})}catch(o){return console.error("Delete fingerprint error:",o),{success:!1,message:o instanceof Error?o.message:String(o)}}})()}getConnectedDevice(){return this.connectedDevice}getInitializationStatus(){return this.isInitialized}cleanup(){l.removeAllListeners(),this.isInitialized=!1,this.connectedDevice=null}setPowerOffTime(){return(0,c.A)(function*(e=30){try{console.log(`\u26a1 Setting power off time: ${e} minutes`);const t=yield l.setPowerOffTime({timeoutMinutes:e});return console.log("\u2705 Power off time set successfully:",t),t}catch(t){throw console.error("\u274c Failed to set power off time:",t),t}}).apply(this,arguments)}wakeUpAndConnectPreferred(){var e=this;return(0,c.A)(function*(){try{const t=e.getPreferredDevice();if(!t)return{success:!1,message:"No preferred device saved"};console.log("\u{1f50b} Attempting to wake up and connect to preferred device:",t.name),e.isInitialized||(yield e.initialize()),console.log("\u{1f50d} Scanning for preferred device..."),yield e.scan(1e4),yield new Promise(u=>setTimeout(u,2e3));const o=e.discoveredDevices.find(u=>u.id===t.id||u.address===t.address);return o?(console.log("\u{1f4f1} Found preferred device, attempting connection..."),(yield e.connect(o.id)).connected?(console.log("\u2705 Successfully woke up and connected to preferred device"),{success:!0,message:`Connected to ${o.name}`}):{success:!1,message:"Found device but connection failed"}):{success:!1,message:"Preferred device not found in scan results"}}catch(t){return console.error("Wake up and connect error:",t),{success:!1,message:t instanceof Error?t.message:String(t)}}})()}static#e=w=()=>(this.\u0275fac=function(t){return new(t||D)},this.\u0275prov=k.jDH({token:D,factory:D.\u0275fac,providedIn:"root"}))}return w(),D})()}}]);