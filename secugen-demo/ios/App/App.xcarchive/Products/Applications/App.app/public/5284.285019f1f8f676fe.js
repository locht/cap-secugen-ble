"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5284],{5284:(U,E,g)=>{g.r(E),g.d(E,{Tab2PageModule:()=>J});var c=g(7343),h=g(2200),b=g(4341),M=g(1307),F=g(8132),u=g(467),r=g(2615),T=g(7479),P=g(5083);class k extends P.E_{write(a){var i=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw i.unavailable("Clipboard API not available in this browser");if(void 0!==a.string)yield i.writeText(a.string);else if(a.url)yield i.writeText(a.url);else{if(!a.image)throw new Error("Nothing to write");if(!(typeof ClipboardItem<"u"))throw i.unavailable("Writing images to the clipboard is not supported in this browser");try{const t=yield(yield fetch(a.image)).blob(),n=new ClipboardItem({[t.type]:t});yield navigator.clipboard.write([n])}catch{throw new Error("Failed to write image")}}})()}read(){var a=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw a.unavailable("Clipboard API not available in this browser");if(!(typeof ClipboardItem<"u"))return a.readText();try{const i=yield navigator.clipboard.read(),t=i[0].types[0],n=yield i[0].getType(t);return{value:yield a._getBlobData(n,t),type:t}}catch{return a.readText()}})()}readText(){var a=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw a.unavailable("Reading from clipboard not supported in this browser");return{value:yield navigator.clipboard.readText(),type:"text/plain"}})()}writeText(a){var i=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw i.unavailable("Writting to clipboard not supported in this browser");yield navigator.clipboard.writeText(a)})()}_getBlobData(a,i){return new Promise((t,n)=>{const s=new FileReader;i.includes("image")?s.readAsDataURL(a):s.readAsText(a),s.onloadend=()=>{t(s.result)},s.onerror=l=>{n(l)}})}}const D=(0,P.F3)("Clipboard",{web:()=>new k});var e=g(3664);function y(o,a){if(1&o&&(e.j41(0,"div",44),e.nrm(1,"ion-progress-bar",45),e.j41(2,"p",46),e.EFF(3),e.k0s()()),2&o){const i=e.XpG(2);e.R7$(),e.Y8G("value",i.captureProgress.progress/100),e.R7$(2),e.SpI("",i.captureProgress.progress,"%")}}function j(o,a){1&o&&(e.j41(0,"p"),e.nrm(1,"ion-icon",47),e.EFF(2," \u0110\u1eb7t ng\xf3n tay l\xean c\u1ea3m bi\u1ebfn v\xe0 gi\u1eef y\xean "),e.k0s())}function w(o,a){1&o&&(e.j41(0,"p"),e.nrm(1,"ion-icon",48),e.EFF(2," \u0110ang t\u1ea3i d\u1eef li\u1ec7u v\xe2n tay... "),e.k0s())}function R(o,a){if(1&o){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"\u0110ang Ch\u1ee5p V\xe2n Tay"),e.k0s()()(),e.j41(4,"ion-content",33)(5,"div",34)(6,"div",35),e.nrm(7,"ion-icon",36),e.k0s(),e.j41(8,"h2",37),e.EFF(9),e.k0s(),e.j41(10,"div",38)(11,"p",39),e.EFF(12),e.k0s()(),e.DNE(13,y,4,2,"div",40),e.j41(14,"div",41),e.DNE(15,j,3,0,"p",27)(16,w,3,0,"p",27),e.k0s(),e.j41(17,"ion-button",42),e.bIt("click",function(){r.eBV(i);const n=e.XpG();return r.Njj(n.cancelCapture())}),e.nrm(18,"ion-icon",43),e.EFF(19," H\u1ee7y b\u1ecf "),e.k0s()()()}if(2&o){const i=e.XpG();e.R7$(7),e.AVh("pulse","capturing"===i.captureProgress.status)("downloading","downloading"===i.captureProgress.status),e.R7$(2),e.JRh(i.captureProgress.message),e.R7$(3),e.SpI("\u23f1\ufe0f ",i.captureProgress.elapsedTime,"s"),e.R7$(),e.Y8G("ngIf","downloading"===i.captureProgress.status),e.R7$(2),e.Y8G("ngIf","capturing"===i.captureProgress.status),e.R7$(),e.Y8G("ngIf","downloading"===i.captureProgress.status)}}function O(o,a){if(1&o){const i=e.RV6();e.j41(0,"ion-button",49),e.bIt("click",function(){r.eBV(i);const n=e.XpG();return r.Njj(n.clearPreferredDevice())}),e.nrm(1,"ion-icon",50),e.k0s()}}function S(o,a){if(1&o){const i=e.RV6();e.j41(0,"ion-item",52),e.nrm(1,"ion-icon",53),e.j41(2,"ion-label")(3,"h3"),e.EFF(4),e.k0s(),e.j41(5,"p",54),e.EFF(6),e.k0s()(),e.j41(7,"ion-button",55),e.bIt("click",function(){const n=r.eBV(i).$implicit,s=e.XpG(2);return r.Njj(s.removePreferredDevice(n.id))}),e.nrm(8,"ion-icon",56),e.k0s()()}if(2&o){const i=a.$implicit;e.R7$(4),e.JRh(i.name),e.R7$(2),e.JRh(i.id)}}function I(o,a){if(1&o&&(e.j41(0,"div"),e.DNE(1,S,9,2,"ion-item",51),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.Y8G("ngForOf",i.preferredDevices)}}function B(o,a){1&o&&(e.j41(0,"ion-item",52),e.nrm(1,"ion-icon",57),e.j41(2,"ion-label")(3,"h3"),e.EFF(4,"Ch\u01b0a c\xf3 thi\u1ebft b\u1ecb \u01b0a th\xedch"),e.k0s()()())}function G(o,a){if(1&o&&(e.j41(0,"ion-select-option",58),e.EFF(1),e.k0s()),2&o){const i=a.$implicit;e.Y8G("value",i.id),e.R7$(),e.Lme(" ",i.name," (",i.rssi,") ")}}function $(o,a){if(1&o&&(e.qex(0),e.j41(1,"ion-item"),e.nrm(2,"ion-icon",59),e.j41(3,"ion-label")(4,"h3"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s()(),e.j41(8,"ion-badge",60),e.EFF(9,"\u0110\xe3 k\u1ebft n\u1ed1i"),e.k0s()(),e.bVm()),2&o){const i=e.XpG();e.R7$(5),e.JRh(i.connectedDevice.name),e.R7$(2),e.JRh(i.connectedDevice.address)}}function A(o,a){1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-icon",61),e.j41(2,"ion-label")(3,"h3"),e.EFF(4,"Ch\u01b0a k\u1ebft n\u1ed1i"),e.k0s()(),e.j41(5,"ion-badge",62),e.EFF(6,"Ch\u01b0a k\u1ebft n\u1ed1i"),e.k0s()())}function z(o,a){if(1&o){const i=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"C\xe0i \u0110\u1eb7t & Thao T\xe1c Ch\u1ee5p V\xe2n Tay"),e.k0s()(),e.j41(4,"ion-card-content")(5,"div",63)(6,"h4",11),e.EFF(7,"C\xe0i \u0111\u1eb7t"),e.k0s(),e.j41(8,"ion-item")(9,"ion-label"),e.EFF(10,"K\xedch th\u01b0\u1edbc \u1ea3nh"),e.k0s(),e.j41(11,"ion-select",64),e.mxI("ngModelChange",function(n){r.eBV(i);const s=e.XpG();return e.DH7(s.captureSettings.sizeOption,n)||(s.captureSettings.sizeOption=n),r.Njj(n)}),e.bIt("ionChange",function(n){r.eBV(i);const s=e.XpG();return r.Njj(s.onSettingsChange("sizeOption",n))}),e.j41(12,"ion-select-option",65),e.EFF(13,"Full Size (300x400)"),e.k0s(),e.j41(14,"ion-select-option",66),e.EFF(15,"Half Size (150x200)"),e.k0s(),e.j41(16,"ion-select-option",67),e.EFF(17,"Small Size (90x120)"),e.k0s(),e.j41(18,"ion-select-option",68),e.EFF(19,"Tiny Size (60x80)"),e.k0s()()(),e.j41(20,"ion-item")(21,"ion-label"),e.EFF(22,"\u0110\u1ecbnh d\u1ea1ng"),e.k0s(),e.j41(23,"ion-select",64),e.mxI("ngModelChange",function(n){r.eBV(i);const s=e.XpG();return e.DH7(s.captureSettings.wsqFormat,n)||(s.captureSettings.wsqFormat=n),r.Njj(n)}),e.bIt("ionChange",function(n){r.eBV(i);const s=e.XpG();return r.Njj(s.onSettingsChange("wsqFormat",n))}),e.j41(24,"ion-select-option",58),e.EFF(25,"WSQ Compressed"),e.k0s(),e.j41(26,"ion-select-option",58),e.EFF(27,"Raw Image"),e.k0s()()(),e.j41(28,"ion-item")(29,"ion-label"),e.EFF(30,"Timeout (gi\xe2y)"),e.k0s(),e.j41(31,"ion-input",69),e.mxI("ngModelChange",function(n){r.eBV(i);const s=e.XpG();return e.DH7(s.captureSettings.timeoutSeconds,n)||(s.captureSettings.timeoutSeconds=n),r.Njj(n)}),e.k0s()()(),e.j41(32,"div",70)(33,"h4",11),e.EFF(34,"Thao t\xe1c"),e.k0s(),e.j41(35,"div",71)(36,"ion-button",72),e.bIt("click",function(){r.eBV(i);const n=e.XpG();return r.Njj(n.captureFingerprint())}),e.nrm(37,"ion-icon",73),e.EFF(38),e.k0s(),e.j41(39,"ion-button",74),e.bIt("click",function(){r.eBV(i);const n=e.XpG();return r.Njj(n.getDeviceVersion())}),e.nrm(40,"ion-icon",75),e.EFF(41," Phi\xean b\u1ea3n thi\u1ebft b\u1ecb "),e.k0s(),e.j41(42,"ion-button",76),e.bIt("click",function(){r.eBV(i);const n=e.XpG();return r.Njj(n.clearResults())}),e.nrm(43,"ion-icon",77),e.EFF(44," X\xf3a k\u1ebft qu\u1ea3 "),e.k0s(),e.j41(45,"ion-button",78),e.bIt("click",function(){r.eBV(i);const n=e.XpG();return r.Njj(n.setPowerOffTime())}),e.nrm(46,"ion-icon",25),e.EFF(47," Thi\u1ebft l\u1eadp Wake-up (30p) "),e.k0s()()()()()}if(2&o){const i=e.XpG();e.R7$(11),e.R50("ngModel",i.captureSettings.sizeOption),e.R7$(12),e.R50("ngModel",i.captureSettings.wsqFormat),e.R7$(),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1),e.R7$(5),e.R50("ngModel",i.captureSettings.timeoutSeconds),e.R7$(5),e.Y8G("disabled",i.isCapturing),e.R7$(2),e.SpI(" ",i.isCapturing?"\u0110ang ch\u1ee5p...":"Ch\u1ee5p v\xe2n tay"," ")}}function N(o,a){if(1&o&&(e.j41(0,"div",79)(1,"span",80),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"span",81),e.EFF(5),e.k0s()()),2&o){const i=a.$implicit;e.HbH("message-"+i.type),e.R7$(2),e.JRh(e.i5U(3,4,i.timestamp,"HH:mm:ss")),e.R7$(3),e.JRh(i.text)}}function V(o,a){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h3"),e.EFF(3,"Th\xf4ng b\xe1o"),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()()()),2&o){const i=e.XpG(2);e.R7$(5),e.JRh(i.captureResult.message)}}function Y(o,a){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h3"),e.EFF(3,"K\xedch th\u01b0\u1edbc"),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()()()),2&o){const i=e.XpG(2);e.R7$(5),e.Lme("",i.captureResult.width," x ",i.captureResult.height," pixels")}}function X(o,a){if(1&o&&(e.j41(0,"div",83)(1,"h4"),e.EFF(2,"H\xecnh \u1ea3nh v\xe2n tay:"),e.k0s(),e.nrm(3,"img",84),e.k0s()),2&o){const i=e.XpG(2);e.R7$(3),e.Y8G("src","data:image/png;base64,"+i.captureResult.pngBase64,e.B4B)}}function L(o,a){if(1&o&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"K\u1ebft Qu\u1ea3 Ch\u1ee5p V\xe2n Tay"),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-item")(6,"ion-label")(7,"h3"),e.EFF(8,"Tr\u1ea1ng th\xe1i"),e.k0s(),e.j41(9,"p"),e.EFF(10),e.k0s()()(),e.DNE(11,V,6,1,"ion-item",27)(12,Y,6,2,"ion-item",27)(13,X,4,1,"div",82),e.k0s()()),2&o){const i=e.XpG();e.R7$(9),e.HbH(i.captureResult.success?"success":"error"),e.R7$(),e.SpI(" ",i.captureResult.success?"Th\xe0nh c\xf4ng":"Th\u1ea5t b\u1ea1i"," "),e.R7$(),e.Y8G("ngIf",i.captureResult.message),e.R7$(),e.Y8G("ngIf",i.captureResult.width&&i.captureResult.height),e.R7$(),e.Y8G("ngIf",i.captureResult.pngBase64)}}const H=[{path:"",component:(()=>{var o;class a{constructor(){this.connectedDevice=null,this.isCapturing=!1,this.captureResult=null,this.versionInfo=null,this.messages=[],this.availableDevices=[],this.selectedDeviceId=null,this.preferredDevice=null,this.preferredDevices=[],this.isScanning=!1,this.isConnecting=!1,this.showCaptureModal=!1,this.captureProgress={status:"capturing",progress:0,message:"\u0110\u1eb7t ng\xf3n tay l\xean c\u1ea3m bi\u1ebfn",startTime:0,elapsedTime:0},this.captureSettings={sizeOption:"full",fullSize:!0,wsqFormat:!0,timeoutSeconds:15},this.secuGenService=(0,r.WQX)(T.Q)}ngOnInit(){this.loadPreferredDevice(),this.updateDeviceStatus(),this.loadAvailableDevices(),this.setupCaptureEventSubscriptions(),setInterval(()=>{this.updateDeviceStatus(),this.checkCaptureResult(),this.loadAvailableDevices()},2e3),this.tryAutoConnect()}setupCaptureEventSubscriptions(){this.secuGenService.captureProgress$.subscribe(t=>{const n=Date.now(),s=this.captureProgress.startTime>0?Math.round((n-this.captureProgress.startTime)/1e3):0;this.captureProgress={status:t.status||"capturing",progress:t.progress||0,message:t.message||"\u0110ang x\u1eed l\xfd...",startTime:this.captureProgress.startTime,elapsedTime:s}}),this.secuGenService.captureComplete$.subscribe(t=>{console.log("\u{1f389} Capture complete received:",t);const n=Date.now(),s=this.captureProgress.startTime>0?Math.round((n-this.captureProgress.startTime)/1e3):0;this.captureProgress={status:"complete",progress:100,message:`Ho\xe0n th\xe0nh trong ${s}s!`,startTime:this.captureProgress.startTime,elapsedTime:s},setTimeout(()=>{this.showCaptureModal=!1,this.addMessage(`Ch\u1ee5p v\xe2n tay th\xe0nh c\xf4ng trong ${s} gi\xe2y!`,"success"),this.checkCaptureResult()},2e3)})}checkCaptureResult(){const t=this.secuGenService.getLastCaptureResult();t&&t!==this.captureResult&&(this.captureResult={...t,pngBase64:this.convertRawToPng(t.imageData,t.width,t.height)},this.addMessage("Ch\u1ee5p v\xe2n tay th\xe0nh c\xf4ng!","success"))}ngOnDestroy(){console.log("Tab2 component destroyed")}addMessage(t,n="info"){this.messages.push({text:t,type:n,timestamp:new Date})}updateDeviceStatus(){var t=this;return(0,u.A)(function*(){t.connectedDevice=t.secuGenService.getConnectedDevice()})()}captureFingerprint(){var t=this;return(0,u.A)(function*(){if(t.connectedDevice)try{t.showCaptureModal=!0;const n=Date.now();t.captureProgress={status:"capturing",progress:0,message:"\u0110\u1eb7t ng\xf3n tay l\xean c\u1ea3m bi\u1ebfn",startTime:n,elapsedTime:0},t.isCapturing=!0,t.addMessage("\u0110ang b\u1eaft \u0111\u1ea7u ch\u1ee5p v\xe2n tay...","info"),t.startCaptureTimer(),console.log("\u{1f4cb} Capture settings:",t.captureSettings);const s=yield t.secuGenService.captureWithSizeOption(t.captureSettings.sizeOption,t.captureSettings.wsqFormat,1e3*t.captureSettings.timeoutSeconds);console.log("\u{1f4f8} Capture result:",s),t.captureResult=s,s.success||(t.addMessage(`Ch\u1ee5p th\u1ea5t b\u1ea1i: ${s.message}`,"error"),t.showCaptureModal=!1)}catch(n){t.addMessage(`L\u1ed7i ch\u1ee5p v\xe2n tay: ${n}`,"error"),t.captureResult={success:!1,message:n instanceof Error?n.message:String(n)},t.showCaptureModal=!1}finally{t.isCapturing=!1,t.stopCaptureTimer()}else t.addMessage("Kh\xf4ng c\xf3 thi\u1ebft b\u1ecb k\u1ebft n\u1ed1i","error")})()}cancelCapture(){console.log("\u{1f6ab} Cancel capture clicked"),this.showCaptureModal=!1,this.isCapturing=!1,this.stopCaptureTimer(),this.addMessage("\u0110\xe3 h\u1ee7y ch\u1ee5p v\xe2n tay","warning")}onModalDismiss(){console.log("\u{1f6ab} Modal dismissed"),this.showCaptureModal=!1,this.isCapturing=!1,this.stopCaptureTimer()}getDeviceVersion(){var t=this;return(0,u.A)(function*(){if(t.connectedDevice)try{t.addMessage("\u0110ang l\u1ea5y th\xf4ng tin phi\xean b\u1ea3n...","info");const n=yield t.secuGenService.getVersion();n.success?(t.versionInfo=n,t.addMessage("L\u1ea5y th\xf4ng tin phi\xean b\u1ea3n th\xe0nh c\xf4ng","success")):t.addMessage(`Th\u1ea5t b\u1ea1i: ${n.message}`,"error")}catch(n){t.addMessage(`L\u1ed7i phi\xean b\u1ea3n: ${n}`,"error")}else t.addMessage("Kh\xf4ng c\xf3 thi\u1ebft b\u1ecb k\u1ebft n\u1ed1i","error")})()}copyTemplate(){var t=this;return(0,u.A)(function*(){if(t.captureResult?.template)try{yield D.write({string:t.captureResult.template}),t.addMessage("Template \u0111\xe3 sao ch\xe9p v\xe0o clipboard","success")}catch{t.addMessage("Th\u1ea5t b\u1ea1i khi sao ch\xe9p template","error")}})()}clearResults(){this.captureResult=null,this.versionInfo=null,this.addMessage("\u0110\xe3 x\xf3a k\u1ebft qu\u1ea3","info")}clearMessages(){this.messages=[]}convertRawToPng(t,n,s){try{const l=document.createElement("canvas"),d=l.getContext("2d");if(!d)return t;l.width=n,l.height=s;const m=atob(t),v=new Uint8Array(m.length);for(let p=0;p<m.length;p++)v[p]=m.charCodeAt(p);const x=d.createImageData(n,s),f=x.data;for(let p=0;p<v.length;p++){const _=4*p,C=v[p];f[_]=C,f[_+1]=C,f[_+2]=C,f[_+3]=255}return d.putImageData(x,0,0),l.toDataURL("image/png").split(",")[1]}catch(l){return console.error("L\u1ed7i chuy\u1ec3n \u0111\u1ed5i raw data sang PNG:",l),t}}loadPreferredDevice(){this.preferredDevice=this.secuGenService.getPreferredDevice(),this.preferredDevices=this.secuGenService.getPreferredDevices()}loadAvailableDevices(){this.availableDevices=this.secuGenService.getDiscoveredDevices()}tryAutoConnect(){var t=this;return(0,u.A)(function*(){t.preferredDevice&&!t.connectedDevice&&(t.addMessage("\u0110ang th\u1eed k\u1ebft n\u1ed1i v\u1edbi thi\u1ebft b\u1ecb \u01b0a th\xedch...","info"),yield t.scanForDevices(),(yield t.secuGenService.autoConnectPreferredDevice())?t.addMessage("\u0110\xe3 t\u1ef1 \u0111\u1ed9ng k\u1ebft n\u1ed1i v\u1edbi thi\u1ebft b\u1ecb \u01b0a th\xedch!","success"):t.addMessage("Kh\xf4ng th\u1ec3 t\u1ef1 \u0111\u1ed9ng k\u1ebft n\u1ed1i. Vui l\xf2ng ch\u1ecdn thi\u1ebft b\u1ecb th\u1ee7 c\xf4ng.","warning"))})()}scanForDevices(){var t=this;return(0,u.A)(function*(){if(!t.isScanning)try{t.isScanning=!0,t.addMessage("\u0110ang qu\xe9t thi\u1ebft b\u1ecb...","info"),yield t.secuGenService.initialize(),yield t.secuGenService.scan(1e4),t.loadAvailableDevices(),t.availableDevices.length>0?t.addMessage(`T\xecm th\u1ea5y ${t.availableDevices.length} thi\u1ebft b\u1ecb`,"success"):t.addMessage("Kh\xf4ng t\xecm th\u1ea5y thi\u1ebft b\u1ecb n\xe0o","warning")}catch(n){t.addMessage(`L\u1ed7i qu\xe9t thi\u1ebft b\u1ecb: ${n}`,"error")}finally{t.isScanning=!1}})()}onDeviceSelected(t){this.selectedDeviceId=t.detail.value;const n=this.availableDevices.find(s=>s.id===this.selectedDeviceId);n&&this.addMessage(`\u0110\xe3 ch\u1ecdn: ${n.name}`,"info")}connectToSelectedDevice(){var t=this;return(0,u.A)(function*(){if(t.selectedDeviceId)try{t.isConnecting=!0,t.addMessage("\u0110ang k\u1ebft n\u1ed1i...","info"),(yield t.secuGenService.connect(t.selectedDeviceId)).connected?(t.addMessage("K\u1ebft n\u1ed1i th\xe0nh c\xf4ng!","success"),t.updateDeviceStatus()):t.addMessage("K\u1ebft n\u1ed1i th\u1ea5t b\u1ea1i","error")}catch(n){t.addMessage(`L\u1ed7i k\u1ebft n\u1ed1i: ${n}`,"error")}finally{t.isConnecting=!1}else t.addMessage("Vui l\xf2ng ch\u1ecdn thi\u1ebft b\u1ecb tr\u01b0\u1edbc","warning")})()}saveCurrentAsPreferred(){this.connectedDevice&&(this.secuGenService.savePreferredDevice(this.connectedDevice),this.loadPreferredDevice(),this.addMessage("\u0110\xe3 l\u01b0u thi\u1ebft b\u1ecb l\xe0m \u01b0a th\xedch!","success"))}clearPreferredDevice(){this.secuGenService.clearPreferredDevice(),this.preferredDevice=null,this.preferredDevices=[],this.addMessage("\u0110\xe3 x\xf3a t\u1ea5t c\u1ea3 thi\u1ebft b\u1ecb \u01b0a th\xedch","info")}removePreferredDevice(t){this.secuGenService.removePreferredDevice(t),this.loadPreferredDevice(),this.addMessage("\u0110\xe3 x\xf3a thi\u1ebft b\u1ecb kh\u1ecfi danh s\xe1ch \u01b0a th\xedch","info")}onSettingsChange(t,n){const s=n.detail.value;console.log(`\u{1f527} Settings changed: ${t} = ${s}`),"sizeOption"===t?(this.captureSettings.sizeOption=s,this.captureSettings.fullSize="full"===s,this.addMessage(`\u0110\xe3 ch\u1ecdn: ${{full:"Full Size (300x400)",half:"Half Size (150x200)",small:"Small Size (90x120)",tiny:"Tiny Size (60x80)"}[s]}`,"info")):"wsqFormat"===t&&(this.captureSettings.wsqFormat=s,this.addMessage("\u0110\xe3 ch\u1ecdn: "+(s?"WSQ Compressed":"Raw Image"),"info")),console.log("\u{1f4cb} Current settings:",this.captureSettings)}setPowerOffTime(){var t=this;return(0,u.A)(function*(){if(t.connectedDevice)try{t.addMessage("\u0110ang thi\u1ebft l\u1eadp wake-up time...","info");const n=yield t.secuGenService.setPowerOffTime(30);n.success?t.addMessage("\u2705 \u0110\xe3 thi\u1ebft l\u1eadp wake-up time: 30 ph\xfat","success"):t.addMessage(`\u274c Thi\u1ebft l\u1eadp th\u1ea5t b\u1ea1i: ${n.message}`,"error")}catch(n){t.addMessage(`\u274c L\u1ed7i thi\u1ebft l\u1eadp wake-up: ${n}`,"error")}else t.addMessage("Kh\xf4ng c\xf3 thi\u1ebft b\u1ecb k\u1ebft n\u1ed1i","error")})()}wakeUpAndConnect(){var t=this;return(0,u.A)(function*(){if(!t.isConnecting)try{t.isConnecting=!0,t.addMessage("\u{1f50b} \u0110ang \u0111\xe1nh th\u1ee9c v\xe0 k\u1ebft n\u1ed1i thi\u1ebft b\u1ecb \u01b0a th\xedch...","info");const n=yield t.secuGenService.wakeUpAndConnectPreferred();n.success?(t.addMessage(`\u2705 ${n.message}`,"success"),t.updateDeviceStatus()):t.addMessage(`\u274c ${n.message}`,"error")}catch(n){t.addMessage(`\u274c L\u1ed7i \u0111\xe1nh th\u1ee9c thi\u1ebft b\u1ecb: ${n}`,"error")}finally{t.isConnecting=!1}})()}startCaptureTimer(){this.stopCaptureTimer(),this.captureTimer=setInterval(()=>{if(this.captureProgress.startTime>0){const t=Date.now(),n=Math.round((t-this.captureProgress.startTime)/1e3);this.captureProgress.elapsedTime=n}},1e3)}stopCaptureTimer(){this.captureTimer&&(clearInterval(this.captureTimer),this.captureTimer=null)}static#e=o=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275cmp=e.VBU({type:a,selectors:[["app-tab2"]],standalone:!1,decls:66,vars:21,consts:[["noPreferredDevices",""],["notConnected",""],[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"didDismiss","isOpen","canDismiss"],[1,"main-layout"],[1,"left-column"],["name","bluetooth","color","primary"],[1,"device-section"],[1,"section-title"],["fill","clear","size","small","color","danger",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["placeholder","Ch\u1ecdn thi\u1ebft b\u1ecb...","interface","popover",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["slot","start"],[1,"device-actions-vertical"],["expand","block","fill","outline",3,"click","disabled"],["name","search","slot","start"],["expand","block","color","success",3,"click","disabled"],["name","bluetooth","slot","start"],["expand","block","color","warning",3,"click","disabled"],["name","star","slot","start"],["expand","block","color","tertiary",3,"click","disabled"],["name","power","slot","start"],[1,"right-column"],[4,"ngIf"],[1,"bottom-row"],[1,"messages-column"],[1,"messages-container"],["class","message-item",3,"class",4,"ngFor","ngForOf"],[1,"capture-column"],[1,"capture-modal-content"],[1,"capture-progress-container"],[1,"fingerprint-animation"],["name","finger-print"],[1,"capture-status"],[1,"timer-section"],[1,"timer-text"],["class","progress-section",4,"ngIf"],[1,"instructions"],["expand","block","fill","outline","color","danger",1,"cancel-button",3,"click"],["name","close","slot","start"],[1,"progress-section"],["color","primary",3,"value"],[1,"progress-text"],["name","hand-left","color","primary"],["name","download","color","success"],["fill","clear","size","small","color","danger",3,"click"],["name","trash","slot","icon-only"],["lines","full",4,"ngFor","ngForOf"],["lines","full"],["name","star","slot","start","color","warning"],[1,"device-details"],["fill","clear","color","danger","slot","end",3,"click"],["name","close"],["name","star-outline","slot","start","color","medium"],[3,"value"],["name","checkmark-circle","slot","start","color","success"],["color","success"],["name","close-circle","slot","start","color","danger"],["color","danger"],[1,"settings-section"],["interface","popover",3,"ngModelChange","ionChange","ngModel"],["value","full"],["value","half"],["value","small"],["value","tiny"],["type","number","min","5","max","60",3,"ngModelChange","ngModel"],[1,"actions-section"],[1,"action-buttons-vertical"],["expand","block","color","primary",3,"click","disabled"],["name","finger-print","slot","start"],["expand","block","color","secondary",3,"click"],["name","information-circle","slot","start"],["expand","block","color","light",3,"click"],["name","trash","slot","start"],["expand","block","color","tertiary",3,"click"],[1,"message-item"],[1,"message-time"],[1,"message-text"],["class","image-preview",4,"ngIf"],[1,"image-preview"],["alt","Fingerprint Image",1,"fingerprint-image",3,"src"]],template:function(n,s){if(1&n){const l=e.RV6();e.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3," Fingerprint Capture "),e.k0s()()(),e.j41(4,"ion-content",3)(5,"ion-header",4)(6,"ion-toolbar")(7,"ion-title",5),e.EFF(8,"Fingerprint Capture"),e.k0s()()(),e.j41(9,"ion-modal",6),e.bIt("didDismiss",function(){return r.eBV(l),r.Njj(s.onModalDismiss())}),e.DNE(10,R,20,9,"ng-template"),e.k0s(),e.j41(11,"div",7)(12,"div",8)(13,"ion-card")(14,"ion-card-header")(15,"ion-card-title"),e.nrm(16,"ion-icon",9),e.EFF(17," Qu\u1ea3n L\xfd Thi\u1ebft B\u1ecb "),e.k0s()(),e.j41(18,"ion-card-content")(19,"div",10)(20,"h4",11),e.EFF(21," Danh s\xe1ch thi\u1ebft b\u1ecb \u01b0a th\xedch "),e.DNE(22,O,2,0,"ion-button",12),e.k0s(),e.DNE(23,I,2,1,"div",13)(24,B,5,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(26,"div",10)(27,"h4",11),e.EFF(28,"Ch\u1ecdn thi\u1ebft b\u1ecb (BLE)"),e.k0s(),e.j41(29,"ion-item")(30,"ion-select",14),e.mxI("ngModelChange",function(m){return r.eBV(l),e.DH7(s.selectedDeviceId,m)||(s.selectedDeviceId=m),r.Njj(m)}),e.DNE(31,G,2,3,"ion-select-option",15),e.k0s(),e.j41(32,"ion-label",16),e.EFF(33,"Thi\u1ebft b\u1ecb:"),e.k0s()()(),e.j41(34,"div",17)(35,"ion-button",18),e.bIt("click",function(){return r.eBV(l),r.Njj(s.scanForDevices())}),e.nrm(36,"ion-icon",19),e.EFF(37),e.k0s(),e.j41(38,"ion-button",20),e.bIt("click",function(){return r.eBV(l),r.Njj(s.connectToSelectedDevice())}),e.nrm(39,"ion-icon",21),e.EFF(40),e.k0s(),e.j41(41,"ion-button",22),e.bIt("click",function(){return r.eBV(l),r.Njj(s.saveCurrentAsPreferred())}),e.nrm(42,"ion-icon",23),e.EFF(43," L\u01b0u l\xe0m thi\u1ebft b\u1ecb \u01b0a th\xedch "),e.k0s(),e.j41(44,"ion-button",24),e.bIt("click",function(){return r.eBV(l),r.Njj(s.wakeUpAndConnect())}),e.nrm(45,"ion-icon",25),e.EFF(46),e.k0s()(),e.j41(47,"div",10)(48,"h4",11),e.EFF(49,"Tr\u1ea1ng th\xe1i k\u1ebft n\u1ed1i"),e.k0s(),e.DNE(50,$,10,2,"ng-container",13)(51,A,7,0,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(53,"div",26),e.DNE(54,z,48,7,"ion-card",27),e.k0s()(),e.j41(55,"div",28)(56,"div",29)(57,"ion-card")(58,"ion-card-header")(59,"ion-card-title"),e.EFF(60,"Messages"),e.k0s()(),e.j41(61,"ion-card-content")(62,"div",30),e.DNE(63,N,6,7,"div",31),e.k0s()()()(),e.j41(64,"div",32),e.DNE(65,L,14,6,"ion-card",27),e.k0s()()()}if(2&n){const l=e.sdS(25),d=e.sdS(52);e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(5),e.Y8G("isOpen",s.showCaptureModal)("canDismiss",!0),e.R7$(13),e.Y8G("ngIf",s.preferredDevices.length>0),e.R7$(),e.Y8G("ngIf",s.preferredDevices.length>0)("ngIfElse",l),e.R7$(7),e.R50("ngModel",s.selectedDeviceId),e.R7$(),e.Y8G("ngForOf",s.availableDevices),e.R7$(4),e.Y8G("disabled",s.isScanning),e.R7$(2),e.SpI(" ",s.isScanning?"\u0110ang qu\xe9t...":"Qu\xe9t thi\u1ebft b\u1ecb"," "),e.R7$(),e.Y8G("disabled",!s.selectedDeviceId||s.isConnecting),e.R7$(2),e.SpI(" ",s.isConnecting?"\u0110ang k\u1ebft n\u1ed1i...":"K\u1ebft n\u1ed1i"," "),e.R7$(),e.Y8G("disabled",!s.connectedDevice),e.R7$(3),e.Y8G("disabled",!s.preferredDevice||s.isConnecting),e.R7$(2),e.SpI(" ",s.isConnecting?"\u0110ang \u0111\xe1nh th\u1ee9c...":"\u0110\xe1nh th\u1ee9c thi\u1ebft b\u1ecb \u01b0a th\xedch"," "),e.R7$(4),e.Y8G("ngIf",s.connectedDevice)("ngIfElse",d),e.R7$(4),e.Y8G("ngIf",s.connectedDevice),e.R7$(9),e.Y8G("ngForOf",s.messages),e.R7$(2),e.Y8G("ngIf",s.captureResult)}},dependencies:[c.In,c.Jm,c.b_,c.I9,c.ME,c.tN,c.W9,c.eU,c.iq,c.$w,c.uz,c.he,c.FH,c.Nm,c.Ip,c.BC,c.ai,c.Sb,c.su,c.Je,c.T6,c.jL,h.Sq,h.bT,b.BC,b.vS,h.vh],styles:[".container[_ngcontent-%COMP%]{padding:16px}ion-card[_ngcontent-%COMP%]{margin-bottom:16px}ion-button[_ngcontent-%COMP%]{margin-bottom:8px}.success[_ngcontent-%COMP%]{color:var(--ion-color-success)}.error[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.info[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.warning[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.image-preview[_ngcontent-%COMP%]{text-align:center;margin:16px 0}.fingerprint-image[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border:1px solid var(--ion-color-medium);border-radius:8px;background:#fff}.template-data[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;word-break:break-all}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;padding:16px}@media (max-width: 768px){.main-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.bottom-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;padding:0 16px 16px}@media (max-width: 768px){.bottom-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.device-section[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%], .actions-section[_ngcontent-%COMP%]{margin-bottom:20px}.device-section[_ngcontent-%COMP%]:last-child, .settings-section[_ngcontent-%COMP%]:last-child, .actions-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--ion-color-primary);margin:0 0 12px;padding-bottom:8px;border-bottom:1px solid var(--ion-color-light)}.device-actions-vertical[_ngcontent-%COMP%], .action-buttons-vertical[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:16px}.device-actions-vertical[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .action-buttons-vertical[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:40px;margin:0}.messages-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;padding:8px;background:#f8f9fa;border-radius:8px;border:1px solid var(--ion-color-light)}.message-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:8px;padding:10px;border-radius:6px;font-size:13px;background:#fff;border:1px solid #e0e0e0;box-shadow:0 1px 3px #0000001a}.message-item.message-success[_ngcontent-%COMP%]{background:#fff;border-left:4px solid var(--ion-color-success)}.message-item.message-success[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{color:var(--ion-color-success-shade)}.message-item.message-error[_ngcontent-%COMP%]{background:#fff;border-left:4px solid var(--ion-color-danger)}.message-item.message-error[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{color:var(--ion-color-danger-shade)}.message-item.message-warning[_ngcontent-%COMP%]{background:#fff;border-left:4px solid var(--ion-color-warning)}.message-item.message-warning[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{color:var(--ion-color-warning-shade)}.message-item.message-info[_ngcontent-%COMP%]{background:#fff;border-left:4px solid var(--ion-color-primary)}.message-item.message-info[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade)}.message-time[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}.message-text[_ngcontent-%COMP%]{font-size:11px}.fingerprint-image[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border:1px solid var(--ion-color-medium);border-radius:8px}ion-select[_ngcontent-%COMP%]{max-width:100%}ion-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.capture-modal-content[_ngcontent-%COMP%]{--padding-top: 20px;--padding-bottom: 20px;--padding-start: 20px;--padding-end: 20px}.capture-progress-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center}.fingerprint-animation[_ngcontent-%COMP%]{margin-bottom:30px}.fingerprint-animation[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:120px;color:var(--ion-color-primary);transition:all .3s ease}.fingerprint-animation[_ngcontent-%COMP%]   ion-icon.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite;color:var(--ion-color-warning)}.fingerprint-animation[_ngcontent-%COMP%]   ion-icon.downloading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 2s linear infinite;color:var(--ion-color-success)}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.7}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.capture-status[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:10px;color:var(--ion-color-primary)}.timer-section[_ngcontent-%COMP%]{margin-bottom:20px}.timer-section[_ngcontent-%COMP%]   .timer-text[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--ion-color-secondary);margin:0;text-align:center}.progress-section[_ngcontent-%COMP%]{width:100%;max-width:300px;margin-bottom:30px}.progress-section[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{height:8px;border-radius:4px;margin-bottom:10px}.progress-section[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--ion-color-primary);margin:0}.instructions[_ngcontent-%COMP%]{margin-bottom:30px}.instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-size:16px;color:var(--ion-color-medium-shade);margin:0}.instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.cancel-button[_ngcontent-%COMP%]{max-width:200px;margin-top:auto}"]}))}return o(),a})()}];let K=(()=>{var o;class a{static#e=o=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275mod=e.$C({type:a}),this.\u0275inj=r.G2t({imports:[F.iI.forChild(H),F.iI]}))}return o(),a})(),J=(()=>{var o;class a{static#e=o=()=>(this.\u0275fac=function(n){return new(n||a)},this.\u0275mod=e.$C({type:a}),this.\u0275inj=r.G2t({imports:[c.bv,h.MD,b.YN,M.S,K]}))}return o(),a})()}}]);